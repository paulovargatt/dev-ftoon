"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5630],{5630:(et,P,m)=>{m.r(P),m.d(P,{ComicPlayerPageModule:()=>nt});var d=m(9808),l=m(4182),r=m(661),h=m(2564),a=m(655),_=m(2340),t=m(2096),f=m(5596),y=m(1379),O=m(5830),b=m(520);let x=(()=>{class o{constructor(n){this.http=n}addComment(n,e,i=null){return this.http.post(`${_.N.url}/comment`,{comicId:n,text:e,parent:i}).toPromise()}updateComment(n,e){return this.http.patch(`${_.N.url}/comment`,{id:n,text:e}).toPromise()}deleteComment(n){return this.http.delete(`${_.N.url}/comment/`+n).toPromise()}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(b.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Z(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",7)(1,"ion-textarea",8),t.NdJ("ngModelChange",function(i){return t.CHM(n),t.oxw().commentValueModel=i}),t.qZA()()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngModel",n.commentValueModel)}}let T=(()=>{class o{constructor(n,e,i,s){this.modalController=n,this.navParams=e,this.overlay=i,this.commentService=s}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){this.comment=yield this.navParams.get("comment"),this.type=yield this.navParams.get("type"),this.commentValueModel=this.comment.comment})}closeModal(n){return(0,a.mG)(this,void 0,void 0,function*(){yield this.modalController.dismiss(n||null)})}updateComment(){return(0,a.mG)(this,void 0,void 0,function*(){if(this.commentValueModel.replace(/  /g,"").length<2)return this.toaster("Ops","Seu coment\xe1rio precisa ter 2 caracteres ou mais...","warning");yield this.commentService.updateComment(this.comment.id,this.commentValueModel).then(e=>{if(200===e.status)return this.closeModal("refresh"),this.toaster("Sucesso","Seu coment\xe1rio foi editado!","primary")})})}toaster(n,e,i){return(0,a.mG)(this,void 0,void 0,function*(){return yield this.overlay.toast({header:n,message:e,color:i})})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(r.IN),t.Y36(r.X1),t.Y36(f.F),t.Y36(x))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-comment-edit"]],decls:11,vars:1,consts:[["mode","ios","color","primary"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding"],["class","comment-area",4,"ngIf"],["mode","ios","expand","full","color","primary",1,"ion-no-margin",3,"click"],[1,"comment-area"],["cols","6","mode","ios","rows","6","color","primary","required","true","autofocus","true",1,"ion-no-margin",3,"ngModel","ngModelChange"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return e.closeModal()}),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"Editar Coment\xe1rio"),t.qZA()()(),t.TgZ(7,"ion-content",4),t.YNc(8,Z,2,1,"div",5),t.TgZ(9,"ion-button",6),t.NdJ("click",function(){return e.updateComment()}),t._uU(10," Atualizar coment\xe1rio "),t.qZA()()),2&n&&(t.xp6(8),t.Q6J("ngIf",e.comment&&e.comment.comment))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.W2,d.O5,r.g2,r.j9,l.Q7,l.JJ,l.On],styles:[".comment-area[_ngcontent-%COMP%]{display:flex;width:100%;height:auto}.comment-area[_ngcontent-%COMP%]   .in-comment[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;align-content:center;position:absolute;height:100%;right:0}.comment-area[_ngcontent-%COMP%]   .in-comment[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-right:8px;z-index:9000}.comment-area[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{background:rgba(211,211,211,.34);border-radius:0;box-shadow:0 2px 3px #80808033;margin-bottom:12px;text-align:left;height:auto;padding:10px}ion-toolbar[_ngcontent-%COMP%]{padding:10px}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{margin-top:10px}ion-content[_ngcontent-%COMP%]{--max-height: 350px}"]}),o})();var M=m(5955);const w=["refSegment"];function k(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",22)(1,"ion-buttons")(2,"ion-button",23),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).openOptionsComment(i)}),t._UZ(3,"ion-icon",24),t.qZA()()()}}function I(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",25)(1,"ion-textarea",26),t.NdJ("ngModelChange",function(i){return t.CHM(n),t.oxw(3).commentValueModel=i}),t.TgZ(2,"div",2)(3,"ion-button",3),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).sendCommentReply(i.id)}),t._uU(4," Enviar "),t.qZA()()(),t.TgZ(5,"ion-buttons",27)(6,"ion-button",28),t.NdJ("click",function(){return t.CHM(n),t.oxw(3).replyClose()}),t._UZ(7,"ion-icon",29),t.qZA()()()}if(2&o){const n=t.oxw().$implicit,e=t.oxw(2);t.xp6(1),t.MGl("placeholder","Resposta a ",n.user.name,""),t.Q6J("ngModel",e.commentValueModel)}}function S(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"ion-button",30),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).commentReply(i.id)}),t._uU(1,"Responder "),t.qZA()}}function J(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",22)(1,"ion-buttons")(2,"ion-button",23),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(4).openOptionsComment(i)}),t._UZ(3,"ion-icon",24),t.qZA()()()}}function N(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",33)(1,"div",34)(2,"div",10)(3,"ion-avatar",11),t.NdJ("click",function(){const s=t.CHM(n).$implicit;return t.oxw(4).openProfile(s.user.id)}),t._UZ(4,"img",12),t.qZA()(),t.TgZ(5,"div",35)(6,"div",14)(7,"p",36)(8,"span",16),t._uU(9),t.qZA(),t._uU(10),t.qZA(),t.YNc(11,J,4,0,"div",17),t.qZA()()()()}if(2&o){const n=c.$implicit,e=t.oxw(4);t.MGl("id","comment-",n.id,""),t.xp6(4),t.s9C("src",n.user.image?n.user.image:"https://www.gravatar.com/avatar/000?d=mp&f=y",t.LSH),t.xp6(5),t.Oqu(n.user.name),t.xp6(1),t.hij(" ",n.comment," "),t.xp6(1),t.Q6J("ngIf",n.user.id==e.user$.id)}}function A(o,c){if(1&o&&(t.TgZ(0,"section",31),t.YNc(1,N,12,5,"div",32),t.qZA()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",n.comment_reply)}}function E(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"ion-avatar",11),t.NdJ("click",function(){const s=t.CHM(n).$implicit;return t.oxw(2).openProfile(s.user.id)}),t._UZ(4,"img",12),t.qZA()(),t.TgZ(5,"div",13)(6,"div",14)(7,"p",15)(8,"span",16),t._uU(9),t.qZA(),t._uU(10),t.qZA(),t.YNc(11,k,4,0,"div",17),t.qZA(),t.TgZ(12,"div",18),t.YNc(13,I,8,2,"div",19),t.YNc(14,S,2,0,"ion-button",20),t.qZA()()(),t.YNc(15,A,2,1,"section",21),t.qZA()}if(2&o){const n=c.$implicit,e=t.oxw(2);t.MGl("id","comment-",n.id,""),t.xp6(4),t.s9C("src",n.user.image?n.user.image:"https://www.gravatar.com/avatar/000?d=mp&f=y",t.LSH),t.xp6(5),t.Oqu(n.user.name),t.xp6(1),t.hij(" ",n.comment," "),t.xp6(1),t.Q6J("ngIf",n.user.id===e.user$.id),t.xp6(2),t.Q6J("ngIf",e.commentOpened&&e.commentOpened==n.id),t.xp6(1),t.Q6J("ngIf",e.commentOpened!=n.id),t.xp6(1),t.Q6J("ngIf",n.comment_reply.length)}}function Y(o,c){if(1&o&&(t.TgZ(0,"div",5,6),t.YNc(2,E,16,8,"div",7),t.qZA()),2&o){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.arrContent)}}let F=(()=>{class o{constructor(n,e,i,s,g,u,p){this.overlay=n,this.actionSheet=e,this.alertController=i,this.modalController=s,this.commentService=g,this.nav=u,this.store=p,this.updateData=new t.vpe,this.pauseRefresh=new t.vpe,this.initRefreshComments=new t.vpe}ngOnInit(){this.userSub=this.store.pipe((0,M.Ys)(n=>n.auth)).subscribe(n=>{console.log(n,"Pego ?"),n.user&&(this.user$=n.user)})}ngOnDestroy(){this.userSub.unsubscribe()}openProfile(n){}sendCommentReply(n){return(0,a.mG)(this,void 0,void 0,function*(){if(void 0===this.commentValueModel||this.commentValueModel.length<1)return yield this.overlay.toast({message:"Seu coment\xe1rio precisa ter 1 ou mais caracteres",header:"Ops"});const e=yield this.loader("Enviando seu coment\xe1rio!");yield this.commentService.addComment(this.contentId,this.commentValueModel,n).then(i=>{const s=i;return this.commentValueModel="",this.updateData.emit({}),this.replyClose(),this.findFocusComment(s.opinion?s.opinion.id:s.commentary?s.commentary.id:!!s.discussion&&s.discussion.id),e.dismiss(),this.toaster("Sucesso","Seu coment\xe1rio foi adicionado com sucesso!","primary")})})}sendNewComment(){return(0,a.mG)(this,void 0,void 0,function*(){if(void 0===this.sendNewCommentModel||this.sendNewCommentModel.length<1)return yield this.overlay.toast({message:"Seu coment\xe1rio precisa ter 1 ou mais caracteres",header:"Ops"});const n=yield this.loader("Enviando seu coment\xe1rio!");yield this.commentService.addComment(this.contentId,this.sendNewCommentModel).then(e=>{const i=e;return this.updateData.emit({}),this.sendNewCommentModel="",n.dismiss(),this.findFocusComment(i.opinion?i.opinion.id:i.commentary?i.commentary.id:!!i.discussion&&i.discussion.id),this.toaster("Sucesso","Seu coment\xe1rio foi adicionado com sucesso!","primary")})})}findFocusComment(n){setTimeout(()=>{const e=document.getElementById(`comment-${n}`);e&&this.content.scrollToPoint(0,e.offsetTop-50,1500)},1e3)}openOptionsComment(n){this.actionSheetShow(n)}commentReply(n){this.commentValueModel="",this.commentOpened=n,this.pauseRefresh.emit({})}replyClose(){this.commentOpened=!1,this.initRefreshComments.emit({})}deleteComment(n){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.loader("Excluindo seu coment\xe1rio!");yield this.commentService.deleteComment(n).then(i=>{if(200===i.status)return this.updateData.emit({}),e.dismiss(),this.toaster("Sucesso","Seu coment\xe1rio foi exclu\xeddo!","primary")})})}loader(n){return(0,a.mG)(this,void 0,void 0,function*(){return this.overlay.loading({message:n})})}showAlert(){return this.overlay.alert({header:"Coment\xe1rio enviado",message:"Seu coment\xe1rio foi enviado com sucesso."})}actionSheetShow(n){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheet.create({cssClass:"comment-component",buttons:[{text:"Editar coment\xe1rio",icon:"create",handler:()=>{this.openModal(n)}},{text:"Excluir coment\xe1rio",role:"destructive",icon:"trash",handler:()=>{this.alertDeleteComment(n)}}]})).present()})}toaster(n,e,i){return(0,a.mG)(this,void 0,void 0,function*(){return yield this.overlay.toast({header:n,message:e,color:i})})}openModal(n){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:T,cssClass:"comment-edit-modal",mode:"ios",breakpoints:[0,.5,1],initialBreakpoint:.5,componentProps:{comment:n}});return e.onDidDismiss().then(i=>{"refresh"===i.data&&this.updateData.emit()}),yield e.present()})}alertDeleteComment(n){return(0,a.mG)(this,void 0,void 0,function*(){yield this.overlay.alert({header:"Tem certeza ?",message:"Voc\xea ir\xe1 apagar seu coment\xe1rio",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Sim! Excluir",handler:()=>this.deleteComment(n.id)}]})})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(f.F),t.Y36(r.BX),t.Y36(r.Br),t.Y36(r.IN),t.Y36(x),t.Y36(r.SH),t.Y36(M.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-comments"]],viewQuery:function(n,e){if(1&n&&t.Gf(w,5),2&n){let i;t.iGM(i=t.CRH())&&(e.refSegment=i.first)}},inputs:{arrContent:"arrContent",contentId:"contentId",content:"content"},outputs:{updateData:"updateData",pauseRefresh:"pauseRefresh",initRefreshComments:"initRefreshComments"},decls:6,vars:2,consts:[[1,"comment-area"],["cols","2","rows","2","auto-grow","true","color","dark","required","true","placeholder","Adicionar coment\xe1rio",3,"ngModel","ngModelChange"],[1,"in-comment"],["mode","ios","size","small","color","primary",3,"click"],["class","comments-list ion-margin-top",4,"ngIf"],[1,"comments-list","ion-margin-top"],["refSegment",""],["class","comment",3,"id",4,"ngFor","ngForOf"],[1,"comment",3,"id"],[1,"comment-line"],[1,"avatar"],[1,"ion-margin-start",3,"click"],[3,"src"],[1,"description"],[1,"area"],[1,"default-font",2,"min-width","90%"],[1,"bold-font","user-link"],["class","options-comment",4,"ngIf"],[1,"bottom-options"],["class","comment-area","style","width: 88%",4,"ngIf"],["size","small","fill","clear","mode","ios","class","ion-no-margin","style","margin-top: -7px;",3,"click",4,"ngIf"],["class","replys",4,"ngIf"],[1,"options-comment"],["fill","clear","size","small","mode","ios",3,"click"],["slot","icon-only","name","ellipsis-vertical","mode","md","color","primary"],[1,"comment-area",2,"width","88%"],["cols","2","rows","1","auto-grow","true","type","text","color","dark","required","true","mode","md","autofocus","false",1,"ion-no-margin",3,"ngModel","placeholder","ngModelChange"],[2,"position","absolute"],["mode","ios","size","small","fill","clear",1,"close-reply",3,"click"],["slot","icon-only","name","close-circle"],["size","small","fill","clear","mode","ios",1,"ion-no-margin",2,"margin-top","-7px",3,"click"],[1,"replys"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"comment-line","reply"],[1,"description","ion-no-padding"],[1,"default-font"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"ion-textarea",1),t.NdJ("ngModelChange",function(s){return e.sendNewCommentModel=s}),t.TgZ(2,"div",2)(3,"ion-button",3),t.NdJ("click",function(){return e.sendNewComment()}),t._uU(4," Enviar "),t.qZA()()()(),t.YNc(5,Y,3,1,"div",4)),2&n&&(t.xp6(1),t.Q6J("ngModel",e.sendNewCommentModel),t.xp6(4),t.Q6J("ngIf",e.arrContent&&e.arrContent.length))},directives:[r.g2,r.j9,l.Q7,l.JJ,l.On,r.YG,d.O5,d.sg,r.BJ,r.Sm,r.gu],styles:["p.headline-comment[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;width:100%;color:var(--ion-color-primary)}p.headline-comment[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 6px;font-size:1.2em}.comment-area[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:16px}.comment-area[_ngcontent-%COMP%]   .in-comment[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;align-content:center;position:absolute;height:100%;right:0;z-index:1500}.comment-area[_ngcontent-%COMP%]   .in-comment[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-right:8px;z-index:9000}.comment-area[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{background:rgba(211,211,211,.34);border-radius:8px;--padding-start: 10px;box-shadow:0 2px 3px #80808033;--padding-end: 70px;padding-bottom:12px;text-align:left}.comments-list[_ngcontent-%COMP%]{margin-top:15px}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{padding-bottom:0}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;width:100%;margin-bottom:10px;margin-top:2px}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line[_ngcontent-%COMP%]   div.ion-no-padding[_ngcontent-%COMP%]{padding:0 3px;width:100%}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;align-content:center}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:56px;height:56px;margin:0 3px}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{padding:0 3px;width:100%}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]   .options-comment[_ngcontent-%COMP%]{width:18px}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]   .options-comment[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-top: 0}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0;font-size:.9em;background:transparent;padding:1px 8px;border-radius:12px}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line.reply[_ngcontent-%COMP%]{align-items:center;padding-left:48px;font-size:.9em;margin-bottom:0}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line.reply[_ngcontent-%COMP%]:last-child{margin-bottom:10px}.comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-line.reply[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:35px!important;height:35px!important;margin-top:0!important}.replys[_ngcontent-%COMP%]{margin-top:-26px}.close-reply[_ngcontent-%COMP%]{position:absolute;left:-40px;top:0px}.bottom-options[_ngcontent-%COMP%]{justify-content:flex-end;padding:5px 0;display:flex;width:100%;text-align:right;margin-bottom:0;margin-top:0}.user-link[_ngcontent-%COMP%]{color:var(--ion-color-dark);margin:6px 0;text-align:left;width:100%;display:flex}@media (max-width: 360px){.comment-line.reply[_ngcontent-%COMP%]{padding-left:25px}.comment-line.reply[_ngcontent-%COMP%]:first-child{margin-top:15px}.comment-line[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.77em!important}}"]}),o})();const U=["contentIon"],q=["comentSection"];function Q(o,c){1&o&&(t.TgZ(0,"div",23),t._UZ(1,"ion-spinner",24),t.qZA())}function G(o,c){1&o&&t._UZ(0,"ion-img",30),2&o&&t.Q6J("src",c.$implicit.url)}function z(o,c){if(1&o&&(t.TgZ(0,"div",28),t.YNc(1,G,1,1,"ion-img",29),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.images)}}function H(o,c){if(1&o&&(t.TgZ(0,"div",25),t.YNc(1,z,2,1,"div",26),t._UZ(2,"div",27),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.images&&n.images.length)}}function R(o,c){1&o&&(t.TgZ(0,"div",31),t._uU(1," Sem Conte\xfado no momento. "),t.qZA())}function j(o,c){1&o&&(t.TgZ(0,"div",32)(1,"div",33),t._UZ(2,"img",34),t.qZA(),t.TgZ(3,"div",35)(4,"div",36)(5,"h2",12),t._uU(6,"GUAR\xc1"),t.qZA(),t.TgZ(7,"ion-chip",37)(8,"ion-label"),t._uU(9,"Autor"),t.qZA()()(),t.TgZ(10,"p",12),t._uU(11,"Somos uma editora que publica e produz hist\xf3rias em quadrinhos totalmente brasileiras. Queremos popularizar o quadrinho nacional e lev\xe1-lo para o dia-a-dia do brasileiro. Desta forma buscamos contribuir com a expans\xe3o do mercado para artistas e leitores. Escolha o seu g\xeanero favorito, tem pra todo mundo!"),t.qZA()()())}function D(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"app-comments",38),t.NdJ("updateData",function(){return t.CHM(n),t.oxw().getComments()}),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("contentId",n.comic.id)("arrContent",n.comments)}}function B(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"ion-button",20),t.NdJ("click",function(){return t.CHM(n),t.oxw().scrollToComment()}),t._UZ(1,"ion-icon",39),t.qZA()}}function $(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"ion-button",42),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return i.getItemsById(i.comic.previous_id,!0)}),t._UZ(1,"ion-icon",43),t.qZA()}}function V(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"ion-button",42),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return i.getItemsById(i.comic.next_id,!0)}),t._UZ(1,"ion-icon",44),t.qZA()}}function X(o,c){if(1&o&&(t.TgZ(0,"div",40),t.YNc(1,$,2,0,"ion-button",41),t.YNc(2,V,2,0,"ion-button",41),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.comic.previous_id),t.xp6(1),t.Q6J("ngIf",n.comic.next_id)}}const L=[{path:"",component:(()=>{class o{constructor(n,e,i,s,g,u){this.router=n,this.nav=e,this.overlay=i,this.plat=s,this.pubSub=g,this.api=u,this.loading=!0,this.totalHeightContent=0,this.defaultBackPage=_.N.pages.episodeoDetail,this.liked=!1}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){if(this.router.getCurrentNavigation().extras.state){const n=this.router.getCurrentNavigation().extras.state;yield this.getItemsById(n.comic.id),this.serie=n.serie}else this.nav.navigateRoot(_.N.pages.home)})}like(){this.api.likeComic(this.comic.id).then(n=>{const e=n;this.pubSub.pub("updatesInContentSerie"),this.liked="liked"===e.status})}back(n){if(n)return this.backToEpisodeDetail()}scrollToComment(){this.ionContent.el.scrollToPoint(0,this.totalHeightContent-100,500)}getItemsById(n,e=!1){return(0,a.mG)(this,void 0,void 0,function*(){this.loading=!0,e&&(yield this.ionContent.el.scrollToTop(500)),yield this.api.getComicById(n||this.comic.id).then(i=>(0,a.mG)(this,void 0,void 0,function*(){var s,g;const u=i;this.images=u.data,this.comic=u.comic,this.liked=u.comic.like,this.getComments();try{for(var C,p=(0,a.KL)(this.images);!(C=yield p.next()).done;){const v=C.value;yield this.runImageInfo(v.url)}}catch(v){s={error:v}}finally{try{C&&!C.done&&(g=p.return)&&(yield g.call(p))}finally{if(s)throw s.error}}this.loading=!1})).catch(i=>{this.loading=!1})})}getComments(){return(0,a.mG)(this,void 0,void 0,function*(){yield this.api.getCommentsByComic(this.comic.id).then(n=>(0,a.mG)(this,void 0,void 0,function*(){const e=n;this.comments=e.data.comments,this.countComments=e.data.all_comments_count})).catch(n=>{this.loading=!1})})}getMeta(n){return new Promise((e,i)=>{const s=new Image;s.onload=()=>e(s),s.onerror=()=>i(),s.src=n})}runImageInfo(n){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.getMeta(n),i=Math.round(e.height*(this.plat.width()/e.width));this.totalHeightContent+=i})}logScrolling(n){const e=this.totalHeightContent-this.plat.height();this.gettPercentageScroll(e,n.detail.scrollTop)}gettPercentageScroll(n,e){let i=e/n*100;return i=Math.round(i),50===i&&this.overlay.toast({message:"Metade",position:"top",color:"danger",duration:1}),100===i&&this.overlay.toast({message:"Fim",position:"top",color:"danger",duration:1}),i}backToEpisodeDetail(){return this.nav.back()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(h.F0),t.Y36(r.SH),t.Y36(f.F),t.Y36(r.t4),t.Y36(y.h),t.Y36(O.s))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-comic-player"]],viewQuery:function(n,e){if(1&n&&(t.Gf(U,5),t.Gf(q,5)),2&n){let i;t.iGM(i=t.CRH())&&(e.ionContent=i.first),t.iGM(i=t.CRH())&&(e.comentSection=i.first)}},decls:30,vars:14,consts:[[3,"scrollEvents","ionScroll"],["contentIon",""],["mode","md"],[1,"title-head"],[1,"ion-no-margin"],["slot","end"],["icon","close",1,"nav-back",3,"defaultHref"],["class","custom-loading-spinner",4,"ngIf"],["class","comic-content fadeIn",4,"ngIf"],["class","text-center ion-padding",4,"ngIf"],["class","author ion-padding",4,"ngIf"],[1,"comments","ion-padding"],[1,"demi-font"],["comentSection",""],[3,"contentId","arrContent","updateData",4,"ngIf"],["collapse","fade"],[1,""],["fill","clear","slot","start",3,"color","click"],["slot","icon-only",3,"name"],["fill","clear","slot","start",3,"click",4,"ngIf"],["fill","clear","slot","start",3,"click"],["slot","icon-only","name","close"],["class","end",4,"ngIf"],[1,"custom-loading-spinner"],["name","dots","color","primary"],[1,"comic-content","fadeIn"],["class","comic",4,"ngIf"],[1,"comments"],[1,"comic"],[3,"src",4,"ngFor","ngForOf"],[3,"src"],[1,"text-center","ion-padding"],[1,"author","ion-padding"],[1,"image"],["src","../../../assets/images/guara.png"],[1,"description"],[1,"title"],["color","primary"],[3,"contentId","arrContent","updateData"],["slot","icon-only","name","chatbox-outline"],[1,"end"],["slot","end","shape","round",3,"click",4,"ngIf"],["slot","end","shape","round",3,"click"],["name","arrow-back-outline"],["name","arrow-forward-outline"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-content",0,1),t.NdJ("ionScroll",function(s){return e.logScrolling(s)}),t.TgZ(2,"ion-header")(3,"ion-toolbar",2)(4,"ion-title",3),t._uU(5),t.TgZ(6,"p",4),t._uU(7),t.qZA()(),t.TgZ(8,"ion-buttons",5),t._UZ(9,"ion-back-button",6),t.qZA()()(),t.YNc(10,Q,2,0,"div",7),t.YNc(11,H,3,1,"div",8),t.YNc(12,R,2,0,"div",9),t.YNc(13,j,12,0,"div",10),t.TgZ(14,"div",11)(15,"h4",12),t._uU(16),t.qZA(),t._UZ(17,"section",null,13),t.YNc(19,D,1,2,"app-comments",14),t.qZA()(),t.TgZ(20,"ion-footer",15)(21,"ion-toolbar")(22,"ion-buttons")(23,"div",16)(24,"ion-button",17),t.NdJ("click",function(){return e.like()}),t._UZ(25,"ion-icon",18),t.qZA(),t.YNc(26,B,2,0,"ion-button",19),t.TgZ(27,"ion-button",20),t.NdJ("click",function(){return e.back(!0)}),t._UZ(28,"ion-icon",21),t.qZA()(),t.YNc(29,X,3,2,"div",22),t.qZA()()()),2&n&&(t.Q6J("scrollEvents",!0),t.xp6(5),t.hij("",e.serie?e.serie.name:""," "),t.xp6(2),t.Oqu(e.comic?e.comic.name:""),t.xp6(2),t.Q6J("defaultHref",e.defaultBackPage),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(1),t.Q6J("ngIf",e.images&&!e.images.length),t.xp6(1),t.Q6J("ngIf",e.comic&&!e.comic.author_id),t.xp6(3),t.hij("Coment\xe1rios (",e.countComments?e.countComments:"0",")"),t.xp6(3),t.Q6J("ngIf",e.comments),t.xp6(5),t.Q6J("color",e.liked?"primary":""),t.xp6(1),t.Q6J("name",e.liked?"heart":"heart-outline"),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(3),t.Q6J("ngIf",e.comic))},directives:[r.W2,r.Gu,r.sr,r.wd,r.Sm,r.oU,r.cs,d.O5,r.PQ,d.sg,r.Xz,r.hM,r.Q$,F,r.fr,r.YG,r.gu],styles:["ion-footer[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}ion-footer[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   .end[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:33px;height:33px;background:var(--ion-color-primary);border-radius:50px;color:#fff;--color: white;margin:0 15px}ion-content[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{background:#e9e9e9;background:url(logo-full.4da829e688a3b020.svg) no-repeat center center/contain;min-height:85vh}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:.8em;color:#000}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:3px;font-size:1em;margin-bottom:3px;text-transform:capitalize}.author[_ngcontent-%COMP%]{display:flex;align-items:center}.author[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%;height:100px;border-radius:50%;display:flex;justify-content:center;align-items:center;margin:0 15px}.author[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;width:100px;border-radius:50%;object-fit:cover;border:2px solid var(--ion-color-primary)}.author[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{max-width:70%}.author[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center}.author[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1em}.author[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin-left:10px}.author[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8em}"]}),o})()}];let W=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.Bz.forChild(L)],h.Bz]}),o})(),K=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,r.Pc,l.UX,l.u5]]}),o})(),tt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,r.Pc,l.u5,l.UX,K]]}),o})(),nt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,l.u5,r.Pc,W,tt]]}),o})()}}]);