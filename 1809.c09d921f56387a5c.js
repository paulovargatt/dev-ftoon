"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1809],{1809:(C,m,l)=>{l.r(m),l.d(m,{EditPageModule:()=>y});var d=l(9808),s=l(4182),o=l(661),u=l(2564),g=l(5955),t=l(2096),f=l(5830),_=l(7556);const h=["elModal"];function v(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-img",25),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(3).onSelectAvatar(c)}),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(3);t.Tol(e==n.selectAvatar?"selected":""),t.Q6J("src",e)}}function b(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,v,1,3,"ion-img",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.images)}}function x(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-header",14)(1,"ion-toolbar")(2,"ion-title",15),t._uU(3,"Escolha um avatar"),t.qZA(),t.TgZ(4,"ion-buttons",16)(5,"ion-button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().isModalOpen=!1}),t._UZ(6,"ion-icon",18),t.qZA()(),t.TgZ(7,"ion-buttons",19)(8,"ion-button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().getAvatars()}),t._UZ(9,"ion-icon",21),t.qZA()()()(),t.TgZ(10,"ion-content"),t.YNc(11,b,2,1,"div",22),t.qZA()}if(2&i){const e=t.oxw();t.xp6(9),t.Tol(e.loadAvatars?"rotateIcon":""),t.xp6(2),t.Q6J("ngIf",e.images&&e.images.length)}}const P=function(){return[0,.7,.95]},Z=[{path:"",component:(()=>{class i{constructor(e,n,a,c,p){this.formBuilder=e,this.nav=n,this.api=a,this.auth=c,this.store=p,this.images=[],this.loadAvatars=!1,this.isModalOpen=!1,this.emailRegex=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i}ngOnInit(){this.getUser(),this.getAvatars(),this.formContent=this.formBuilder.group({image:[this.user?this.user.image:""],name:[this.user?this.user.name:"",s.kI.required],email:[this.user?this.user.email:"",s.kI.compose([s.kI.required,s.kI.pattern(this.emailRegex)])]})}onSubmit(){console.log(),this.api.updateUser(this.formContent.value).then(e=>{this.auth.getUserAndDispatch(),this.nav.back()})}getUser(){this.userSub=this.store.pipe((0,g.Ys)(e=>e.auth)).subscribe(e=>{e.user&&(this.user=e.user)})}getAvatars(){this.images=[],this.loadAvatars=!0;const e=(new Date).getTime();for(let n=0;n<20;n++)this.images.push(`https://avatars.dicebear.com/api/adventurer-neutral/${e+n}.svg?size=80`);setTimeout(()=>{this.loadAvatars=!1},700)}closeModalByBreak(e){0===e.detail.breakpoint&&(this.isModalOpen=!1)}onSelectAvatar(e){this.selectAvatar=e,this.formContent.patchValue({image:e}),this.isModalOpen=!1}ngOnDestroy(){this.userSub&&this.userSub.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(s.qu),t.Y36(o.SH),t.Y36(f.s),t.Y36(_.e),t.Y36(g.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit"]],viewQuery:function(e,n){if(1&e&&t.Gf(h,5),2&e){let a;t.iGM(a=t.CRH())&&(n.modalEl=a.first)}},decls:25,vars:8,consts:[["color","primary","mode","ios"],["slot","start","mode","md"],["color","medium",1,"nav-back",3,"defaultHref"],[1,"default","ion-no-padding",3,"formGroup","ngSubmit","keyup.enter"],[1,"user-avatar","ion-margin"],[1,"user-img","img",3,"src"],[1,"change-avatar"],["fill","clear","color","primary",3,"click"],["fill","outline","mode","md","color","medium"],["position","floating"],["formControlName","name"],["type","email","formControlName","email"],["color","primary","expand","block","type","submit",1,"default",3,"disabled"],[3,"isOpen","breakpoints","initialBreakpoint","ionBreakpointDidChange","didDismiss"],["translucent",""],[1,"demi-font"],["slot","end"],[3,"click"],["name","close","slot","icon-only"],["slot","start"],["fill","clear","size","small","mode","ios","slot","icon-only",3,"click"],["name","reload-outline","slot","icon-only"],["class","avatars ion-padding",4,"ngIf"],[1,"avatars","ion-padding"],[3,"src","class","click",4,"ngFor","ngForOf"],[3,"src","click"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3,"Editar perfil"),t.qZA(),t.TgZ(4,"ion-buttons",1),t._UZ(5,"ion-back-button",2),t.qZA()()(),t.TgZ(6,"ion-content")(7,"form",3),t.NdJ("ngSubmit",function(){return n.onSubmit()})("keyup.enter",function(){return n.formContent.valid?n.onSubmit():""}),t.TgZ(8,"div",4),t._UZ(9,"img",5),t.TgZ(10,"div",6)(11,"ion-button",7),t.NdJ("click",function(){return n.isModalOpen=!n.isModalOpen}),t._uU(12,"Alterar avatar"),t.qZA()()(),t.TgZ(13,"ion-item",8)(14,"ion-label",9),t._uU(15,"Nome"),t.qZA(),t._UZ(16,"ion-input",10),t.qZA(),t.TgZ(17,"ion-item",8)(18,"ion-label",9),t._uU(19,"Email"),t.qZA(),t._UZ(20,"ion-input",11),t.qZA(),t.TgZ(21,"ion-button",12),t._uU(22," Salvar "),t.qZA()()(),t.TgZ(23,"ion-modal",13),t.NdJ("ionBreakpointDidChange",function(c){return n.closeModalByBreak(c)})("didDismiss",function(c){return n.closeModalByBreak(c)}),t.YNc(24,x,12,3,"ng-template"),t.qZA()),2&e&&(t.xp6(5),t.Q6J("defaultHref","/app/tabs/menu/account"),t.xp6(2),t.Q6J("formGroup",n.formContent),t.xp6(2),t.s9C("src",n.selectAvatar?n.selectAvatar:n.user.image?n.user.image:"https://www.gravatar.com/avatar/000?d=mp&f=y",t.LSH),t.xp6(12),t.Q6J("disabled",!n.formContent.valid),t.xp6(2),t.Q6J("isOpen",n.isModalOpen)("breakpoints",t.DdM(7,P))("initialBreakpoint",.7))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.oU,o.cs,o.W2,s._Y,s.JL,s.sg,o.YG,o.Ie,o.Q$,o.pK,o.j9,s.JJ,s.u,o.ki,o.gu,d.O5,d.sg,o.Xz],styles:["form[_ngcontent-%COMP%]{padding:16px 20px!important}.section-avatar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.avatars[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;justify-self:center;flex-wrap:wrap;min-height:139px;margin-bottom:24px}.avatars[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-width:58px;min-width:58px;background:#92949c;margin:3px;padding:0;height:58px;min-height:58px;border:2px solid white;border-radius:3px}.avatars[_ngcontent-%COMP%]   ion-img.selected[_ngcontent-%COMP%]{border:1px solid #8b00d1;box-shadow:0 -2px 5px #8b00d1;border-radius:0}.avatars[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]::part(image){border-radius:2px}.rotateIcon[_ngcontent-%COMP%]{transform:rotate(360deg);transition:.4s}.user-img.img[_ngcontent-%COMP%]{width:78px;height:78px;object-fit:cover;border-radius:50%;box-shadow:0 1px 11px #717171}.user-avatar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]}),i})()}];let M=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.Bz.forChild(Z)],u.Bz]}),i})(),y=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.ez,s.u5,s.UX,o.Pc,M]]}),i})()}}]);